---
variant: fcos
version: 1.4.0
storage:
  directories:
    - path: /etc/hosts.d
      user:
        name: root
      group:
        name: root
    - path: /etc/systemd/resolved.conf.d
      user:
        name: root
      group:
        name: root
  files:
    - path: /etc/systemd/resolved.conf.d/dnsmasq.conf
      user:
        name: root
      group:
        name: root
      contents:
        inline: |
          [Resolve]
          DNS=127.0.0.1
          Domains=~.
    - path: /etc/hosts.d/homelab
      user:
        name: root
      group:
        name: root
      contents:
        inline: |
          192.168.178.100 filebrowser.wallstreet30.cc
          192.168.178.100 fireflyiii.wallstreet30.cc
          192.168.178.100 gitea.wallstreet30.cc
          192.168.178.100 grafana.wallstreet30.cc
          192.168.178.100 home-assistant.wallstreet30.cc
          192.168.178.100 jackett.wallstreet30.cc
          192.168.178.100 jellyfin.wallstreet30.cc
          192.168.178.100 kavita.wallstreet30.cc
          192.168.178.100 miniflux.wallstreet30.cc
          192.168.178.100 prometheus.wallstreet30.cc
          192.168.178.100 qobuz-dl.wallstreet30.cc
          192.168.178.100 radarr.wallstreet30.cc
          192.168.178.100 recipes.wallstreet30.cc
          192.168.178.100 sonarr.wallstreet30.cc
          192.168.178.100 syncthing.wallstreet30.cc
          192.168.178.100 traefik.wallstreet30.cc
          192.168.178.100 transmission.wallstreet30.cc
          192.168.178.100 vaultwarden.wallstreet30.cc

          192.168.178.100 k3s.wallstreet30.cc
          192.168.178.100 argocd.wallstreet30.cc
          # 192.168.178.101 traefik-k3s.wallstreet30.cc
          # 192.168.178.101 jellyfin-k3s.wallstreet30.cc
          # 192.168.178.101 miniflux-k3s.wallstreet30.cc
    - path: /etc/dnsmasq.conf
      user:
        name: root
      group:
        name: root
      contents:
        inline: |
          user=dnsmasq
          group=dnsmasq
          bind-dynamic
          interface=enp3s0,wg0
          server=1.1.1.1
          listen-address=::1,127.0.0.1,192.168.178.100
          conf-dir=/etc/dnsmasq.d,.rpmnew,.rpmsave,.rpmorig
          addn-hosts=/etc/hosts.d/homelab
