---

version: '3.8'

services:
  mqtt:
    image: ${MQTT_SERVICE_IMAGE:?}:${MQTT_SERVICE_VERSION:?}
    container_name: ${MQTT_SERVICE_NAME:?}
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - "${DOCKER_DATA}/${MQTT_SERVICE_NAME}/config:/mosquitto/config"
      - "${SERVICES_DIR:?}/${MQTT_SERVICE_NAME}/mqtt.conf:/mosquitto/config/mosquitto.conf:ro"
      - "${SERVICES_DIR:?}/${MQTT_SERVICE_NAME}/mqtt_password_file:/mosquitto/config/password_file:ro"
      - "${DOCKER_DATA}/${MQTT_SERVICE_NAME}/data:/mosquitto/data"
      - "${DOCKER_DATA}/${MQTT_SERVICE_NAME}/log:/mosquitto/log"
    security_opt:
      - "label:disable"
    networks:
      - private
    restart: unless-stopped
