---
version: v1alpha1
machine:
  install:
    disk: /dev/mmcblk
    image: factory.talos.dev/image/3be8dcdb5d390122648d2336fc1e7a2dd584c8fc391492fc9ae009639b864a06:v1.10.0
    wipe: true
  kubelet:
    extraMounts:
      - destination: /var/lib/longhorn
        type: bind
        source: /var/lib/longhorn
        options:
          - bind
          - rshared
          - rw

  features:
    hostDNS:
      forwardKubeDNSToHost: false

cluster:
  controlPlane:
    endpoint: https://192.168.178.102:6443
  clusterName: rpi
  network:
    dnsDomain: cluster.local

  apiServer:
    certSANs:
      - 192.168.178.102
  allowSchedulingOnControlPlanes: true
