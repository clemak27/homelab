---
version: v1alpha1  # Indicates the schema used to decode the contents.
machine:
  install:
    disk: /dev/mmcblk
    image: factory.talos.dev/image/3be8dcdb5d390122648d2336fc1e7a2dd584c8fc391492fc9ae009639b864a06:v1.10.0
    wipe: true

  features:
    hostDNS:
      forwardKubeDNSToHost: false

# Provides cluster specific configuration options.
cluster:
  controlPlane:
    endpoint: https://192.168.178.102:6443  # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
  clusterName: rpi  # Configures the cluster's name.
  # Provides cluster specific network configuration options.
  network:
    dnsDomain: cluster.local  # The domain used by Kubernetes DNS.
    # The pod subnet CIDR.
    podSubnets:
      - 10.244.0.0/16
    # The service subnet CIDR.
    serviceSubnets:
      - 10.96.0.0/12

  # API server specific configuration options.
  apiServer:
    certSANs:
      - 192.168.178.102
  allowSchedulingOnControlPlanes: true
