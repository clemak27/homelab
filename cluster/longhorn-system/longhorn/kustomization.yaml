---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - https://raw.githubusercontent.com/longhorn/longhorn/v1.4.1/deploy/longhorn.yaml
  - frontend-ingress.yaml
patchesJSON6902:
  - target:
      group: apps
      version: v1
      kind: DaemonSet
      name: longhorn-manager
    patch: |-
      - op: replace
        path: /spec/template/spec/containers/0/command
        value:
          - longhorn-manager
          - -d
          - daemon
          - --engine-image
          - "longhornio/longhorn-engine:v1.4.1"
          - --instance-manager-image
          - "longhornio/longhorn-instance-manager-nix:v1.4.1"
          - --share-manager-image
          - "longhornio/longhorn-share-manager:v1.4.1"
          - --backing-image-manager-image
          - "longhornio/backing-image-manager:v1.4.1"
          - --support-bundle-manager-image
          - "longhornio/support-bundle-kit:v0.0.19"
          - --manager-image
          - "longhornio/longhorn-manager:v1.4.1"
          - --service-account
          - longhorn-service-account
  - target:
      group: apps
      version: v1
      kind: DaemonSet
      name: longhorn-manager
    path: nix_path.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: longhorn-driver-deployer
    path: nix_path.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: longhorn-recovery-backend
    path: nix_path.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: longhorn-ui
    path: nix_path.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: longhorn-conversion-webhook
    path: nix_path.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: longhorn-admission-webhook
    path: nix_path.yaml
