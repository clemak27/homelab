---
## @param containerSecurityContext Security context
containerSecurityContext: {}
#   allowPrivilegeEscalation: false
#   capabilities:
#     drop:
#       - ALL
#   # Add the SYS_CHROOT capability for root and rootless images if you intend to
#   # run pods on nodes that use the container runtime cri-o. Otherwise, you will
#   # get an error message from the SSH server that it is not possible to read from
#   # the repository.
#   # https://gitea.com/gitea/helm-chart/issues/161
#     add:
#       - SYS_CHROOT
#   privileged: false
#   readOnlyRootFilesystem: true
#   runAsGroup: 1000
#   runAsNonRoot: true
#   runAsUser: 1000

## @section Service
service:
  http:
    type: ClusterIP
    port: 3000
  ssh:
    type: ClusterIP
    port: 222

ingress:
  enabled: true
  className: traefik
  annotations:
    ingress.kubernetes.io/ssl-redirect: "true"
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    cert-manager.io/cluster-issuer: letsencrypt-production
  hosts:
    - host: forgejo.wallstreet30.cc
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - forgejo.wallstreet30.cc
      secretName: forgejo-tls

persistence:
  enabled: true
  storageClass: longhorn-crypto
  claimName: "forgejo-data"
  volumeName: "forgejo-data"
  size: 10Gi

gitea:
  admin:
    existingSecret: forgejo-admin
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  ## @param gitea.additionalConfigSources Additional configuration from secret or configmap
  additionalConfigSources: []
  #   - secret:
  #       secretName: gitea-app-ini-oauth
  #   - configMap:
  #       name: gitea-app-ini-plaintext

  ## @param gitea.additionalConfigFromEnvs Additional configuration sources from environment variables
  additionalConfigFromEnvs:
    - name: FORGEJO__DATABASE__PASSWD
      valueFrom:
        secretKeyRef:
          name: forgejo-database-app
          key: password

  ## @section `app.ini` overrides
  ## @descriptionStart
  ##
  ## Every value described in the [Cheat
  ## Sheet](https://forgejo.org/docs/latest/admin/config-cheat-sheet/) can be
  ## set as a Helm value. Configuration sections map to (lowercased) YAML
  ## blocks, while the keys themselves remain in all caps.
  ##
  ## @descriptionEnd
  config:
    APP_NAME: 'forgejo'

    ## @param gitea.config.repository General repository settings
    repository:
      DEFAULT_PRIVATE: private

    ## @param gitea.config.cors Cross-origin resource sharing settings
    cors: {}

    ## @param gitea.config.ui User interface settings
    ui: {}

    ## @param gitea.config.markdown Markdown parser settings
    markdown: {}

    ## @param gitea.config.server [object] General server settings
    server:
      SSH_PORT: 222

    ## @param gitea.config.database Database configuration (only necessary with an [externally managed DB](https://code.forgejo.org/forgejo-helm/forgejo-helm#external-database)).
    database:
      DB_TYPE: postgres
      HOST: forgejo-database-rw
      NAME: forgejo
      USER: forgejo
      SCHEMA: public

    ## @param gitea.config.indexer Settings for what content is indexed and how
    indexer: {}

    ## @param gitea.config.queue Job queue configuration
    queue: {}

    ## @param gitea.config.admin Admin user settings
    admin: {}

    ## @param gitea.config.security Site security settings
    security: {}

    ## @param gitea.config.camo Settings for the [camo](https://github.com/cactus/go-camo) media proxy server (disabled by default)
    camo: {}

    ## @param gitea.config.openid Configuration for authentication with OpenID (disabled by default)
    openid: {}

    ## @param gitea.config.oauth2_client OAuth2 client settings
    oauth2_client: {}

    ## @param gitea.config.service Configuration for miscellaneous Forgejo services
    service: {}

    ## @param gitea.config.ssh.minimum_key_sizes SSH minimum key sizes
    ssh.minimum_key_sizes: {}

    ## @param gitea.config.webhook Webhook settings
    webhook: {}

    ## @param gitea.config.mailer Mailer configuration (disabled by default)
    mailer: {}

    ## @param gitea.config.email.incoming Configuration for handling incoming mail (disabled by default)
    email.incoming: {}

    ## @param gitea.config.cache Cache configuration
    cache: {}

    ## @param gitea.config.session Session/cookie handling
    session: {}

    ## @param gitea.config.picture User avatar settings
    picture: {}

    ## @param gitea.config.project Project board defaults
    project: {}

    ## @param gitea.config.attachment Issue and PR attachment configuration
    attachment: {}

    ## @param gitea.config.log Logging configuration
    log: {}

    ## @param gitea.config.cron Cron job configuration
    cron: {}

    ## @param gitea.config.git Global settings for Git
    git: {}

    ## @param gitea.config.metrics Settings for the Prometheus endpoint (disabled by default)
    metrics: {}

    ## @param gitea.config.api Settings for the Swagger API documentation endpoints
    api: {}

    ## @param gitea.config.oauth2 Settings for the [OAuth2 provider](https://forgejo.org/docs/latest/admin/oauth2-provider/)
    oauth2: {}

    ## @param gitea.config.i18n Internationalization settings
    i18n: {}

    ## @param gitea.config.markup Configuration for advanced markup processors
    markup: {}

    ## @param gitea.config.highlight.mapping File extension to language mapping overrides for syntax highlighting
    highlight.mapping: {}

    ## @param gitea.config.time Locale settings
    time: {}

    ## @param gitea.config.migrations Settings for Git repository migrations
    migrations: {}

    ## @param gitea.config.federation Federation configuration
    federation: {}

    ## @param gitea.config.packages Package registry settings
    packages: {}

    ## @param gitea.config.mirror Configuration for repository mirroring
    mirror: {}

    ## @param gitea.config.lfs Large File Storage configuration
    lfs: {}

    ## @param gitea.config.repo-avatar Repository avatar storage configuration
    repo-avatar: {}

    ## @param gitea.config.avatar User/org avatar storage configuration
    avatar: {}

    ## @param gitea.config.storage General storage settings
    storage: {}

    ## @param gitea.config.proxy Proxy configuration (disabled by default)
    proxy: {}

    ## @param gitea.config.actions Configuration for [Forgejo Actions](https://forgejo.org/docs/latest/user/actions/)
    actions: {}

    ## @param gitea.config.other Uncategorized configuration options
    other: {}

redis-cluster:
  enabled: false

redis:
  enabled: true
  architecture: standalone
  persistence:
    enabled: false

postgresql-ha:
  enabled: false

postgresql:
  enabled: false
